# djShow (v2.2.0)

Отображение на различных устройствах названия и артиста исполняемого трека.

## Принцип работы

Музыкальный проигрыватель записывает в текстовый файл информацию об исполняемой композиции. На этом же компьютере запускается простой http-сервер. По адресу: http://IP-компьютера в локальной сети можно видеть файл index.html, который отображает название и исполнителя, самостоятельно обновляясь при изменении файла с данными. Пример работы см. на видео: https://youtu.be/WGIcBXKJPKI


## Пошаговая инструкция

**Шаг 1. Готовим файл с данными**

Файл NowPlaying.txt создается музыкальным проигрывателем или плагином к нему и обновляется при смене исполняемой композиции. Файл должен быть в кодировке UTF-8 и содержать следующую информацию:

    <title>...</title><artist>...</artist>
или

    Title: ...
    Artist: ...

Протестированные решения под Windows:
- Для Aimp необходим плагин Current track info to file - http://www.aimp.ru/index.php?do=catalog&rec_id=358
- Для Foobar2000 - плагин Now Playing Simple - http://skipyrich.com/wiki/Foobar2000:Now_Playing_Simple

Под Mac:
- Для iTunes и Swinsian - скрипты NowPlaying[...].app. Для других поригрывателей под Mac можно написать аналогичные скрипты самостоятельно (смотрите код).
- В Djay файл NowPlaying.txt создается автоматически и лежит в папке /Users/%username%/Music/djay

**Шаг 2. Включаем мини-сервер**

Устанавливаем Nodejs с официального сайта http://nodejs.org и запускаем скрипт `server.js`.
- Windows - создаем файл start.bat с содержимым: `"C:\Program Files\nodejs\node.exe" server.js`
- Mac и Linux - `$ sudo node  путь_к_скрипту/server.js`.

На этом этапе программа уже работает по адресу: http://localhost или http://127.0.0.1. Можно подключить второй экран или проектор.

**Шаг 3. Создаем сеть**

Включаем wifi-роутер. С любого устройства в сети переходим по адресу: http://IP-компьютера.

Если есть вопросы, пожалуйста, обращайтесь по email: adeinega@mail.ru или https://www.facebook.com/adeinega


## Версии

2.2.0 - Расширение API.

2.1.0 - Появилась возможность добавлять свои сценарии в работу программы.

2.0.1 - Стабильная версия.

2.0.0-alfa - Миграция на Nodejs. Программа полностью переписана.

1.2.1 - Добавлен срок давности для предыдущей композиции.

1.2.0 - Добавлена возможность работы с различными вариантами файла NowPlaying.txt.

1.1.0 - Изменен метод циклического запуска js.

1.0.4 - Ускорен холодный старт на слабых смартфонах.

1.0.3 - Добавлен обработчик ошибок запросов.

1.0.2 - Добавлено кеширование HTML5.

1.0.1 - Подправлены css-стили для отображения фона на весь экран при изменении ориентации мобильного устройства.